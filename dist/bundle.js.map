{"version":3,"file":"bundle.js","sources":["../src/core/css.js","../src/core/filterParser.js","../src/core/textParser.js","../src/parser/parse.js","../src/core/dep.js","../src/core/react.js","../src/util/hash.js","../src/util/lang.js","../src/core/watch.js","../src/core/component.js","../index.js"],"sourcesContent":["function tokenize (cssString, hashCode) {\n  const lines = cssString.trim().split(/\\n/)\n  // eslint-disable-next-line array-callback-return\n  const tokens = lines.reduce((tokens, line) => {\n    const spaces = line.match(/^\\s+/) || ['']\n    const indent = spaces[0].length\n    const input = line.trim()\n    let words = input.split(/:/)\n    let firstWord = words.shift()\n    // eslint-ignore\n    const selectorReg = /([0-9a-zA-Z-.#\\[\\]]+)\\{$/\n    if (words.length === 0) {\n      const result = firstWord.match(selectorReg)\n      if (result) {\n        tokens.push({\n          type: 'selector',\n          value: result[1] + `[data-g-${hashCode}]`,\n          indent\n        })\n      }\n    } else {\n      const type = 'property'\n      tokens.push({\n        type,\n        value: firstWord,\n        indent\n      })\n      // eslint-disable-next-line no-cond-assign\n      while (firstWord = words.shift()) {\n        firstWord = firstWord.trim()\n        const values = firstWord.split(/\\s/)\n        if (values.length > 1) {\n          words = values\n          continue\n        }\n        firstWord = firstWord.replace(/;/, '')\n        tokens.push({\n          type: 'value',\n          value: firstWord,\n          indent: 0\n        })\n      }\n    }\n    return tokens\n    // eslint-disable-next-line no-cond-assign\n  }, [])\n  console.log(tokens)\n  return tokens\n}\nfunction cssParse (cssString, hashCode) {\n  const tokens = tokenize(cssString, hashCode)\n  const ast = { // 定义一个抽象语法树AST对象\n    type: 'root', // 根节点\n    value: 'root',\n    children: [],\n    rules: [],\n    indent: -1\n  }\n  const path = [ast] // 将抽象语法树对象放到数组中，即当前解析路径，最后一个元素为父元素\n  let parentNode = ast // 将当前根节点作为父节点\n  let token\n  const variableDict = {} // 保存定义的变量字典\n  // 遍历所有的token\n  // eslint-disable-next-line no-cond-assign\n  while (token = tokens.shift()) {\n    if (token.type === 'variableDef') { // 如果这个token是变量定义\n      if (tokens[0] && tokens[0].type === 'value') { // 并且如果其下一个token的类型是值定义，那么这两个token就是变量的定义\n        const variableValueToken = tokens.shift() // 取出包含变量值的token\n        variableDict[token.value] = variableValueToken.value // 将变量名和遍历值放到vDict对象中\n      }\n      continue\n    }\n\n    if (token.type === 'selector') { // 如果是选择器\n      const selectorNode = { // 创建一个选择器节点，然后填充children和rules即可\n        type: 'selector',\n        value: token.value,\n        indent: token.indent,\n        rules: [],\n        children: []\n      }\n      if (selectorNode.indent > parentNode.indent) { // 当前节点的缩进大于其父节点的缩进，说明当前选择器节点是父节点的子节点\n        path.push(selectorNode) // 将当前选择器节点加入到path中，路径变长了，当前选择器节点作为父节点\n        parentNode.children.push(selectorNode) // 将当前选择器对象添加到父节点的children数组中\n        parentNode = selectorNode // 当前选择器节点作为父节点\n      } else { // 缩进比其父节点缩进小，说明是非其子节点，可能是出现了同级的节点\n        parentNode = path.pop() // 移除当前路径的最后一个节点\n        while (token.indent <= parentNode.indent) { // 同级节点\n          parentNode = path.pop() // 拿到其父节点的父节点\n        }\n        // 找到父节点后，因为父节点已经从path中移除，所以还需要将父节点再次添加到path中\n        path.push(parentNode, selectorNode)\n        parentNode.children.push(selectorNode) // 找到父节点后，将当前选择器节点添加到父节点children中\n        parentNode = selectorNode // 当前选择器节点作为父节点\n      }\n    }\n\n    if (token.type === 'property') { // 如果是属性节点\n      if (token.indent > parentNode.indent) { // 如果该属性的缩进大于父节点的缩进，说明是父节点选择器的样式\n        parentNode.rules.push({ // 将样式添加到rules数组中 {property: \"border\", value:[]}\n          property: token.value,\n          value: [],\n          indent: token.indent\n        })\n      } else { // 非当前父节点选择器的样式\n        parentNode = path.pop() // 取出并移除最后一个选择器节点，拿到当前父节点\n        while (token.indent <= parentNode.indent) { // 与当前父节点的缩进比较，如果等于，说明与当前父节点同级，如果小于，则说明比当前父节点更上层\n          parentNode = path.pop() // 比当前父节点层次相等或更高，取出当前父节点的父节点，再次循环判其父节点，直到比父节点的缩进大为止\n        }\n        // 拿到了其父节点\n        parentNode.rules.push({ // 将该样式添加到其父选择器节点中\n          property: token.value,\n          value: [],\n          indent: token.indent\n        })\n        path.push(parentNode) // 由于父节点已从path中移除，需要再次将父选择器添加到path中\n      }\n      continue\n    }\n\n    if (token.type === 'value') { // 如果是值节点\n      // 拿到上一个选择器节点的rules中的最后一个rule的value将值添加进去\n      parentNode.rules[parentNode.rules.length - 1].value.push(token.value)\n      continue\n    }\n\n    if (token.type === 'variableRef') { // 如果是变量引用，从变量字典中取出值并添加到父节点样式的value数组中\n      parentNode.rules[parentNode.rules.length - 1].value.push(variableDict[token.value])\n      continue\n    }\n  }\n  return generate(transform(ast))\n}\nfunction transform (ast) {\n  const styles = [] // 存放要输出的每一条样式\n  function traverse (node, styles, selectorChain) {\n    if (node.type === 'selector') { // 如果是选择器节点\n      selectorChain = [...selectorChain, node.value] // 解析选择器层级关系，拿到选择器链\n      if (node.rules.length > 0) {\n        styles.push({\n          selector: selectorChain.join(' '),\n          rules: node.rules.reduce((rules, rule) => { // 遍历其rules, 拿到当前选择器下的所有样式\n            rules.push({ // 拿到该样式规则的属性和属性值并放到数组中\n              property: rule.property,\n              value: rule.value.join(' '),\n              indent: rule.indent\n            })\n            return rules\n          }, []),\n          indent: node.indent\n        })\n      }\n    }\n    // 遍历根节点的children数组\n    for (let i = 0; i < node.children.length; i++) {\n      traverse(node.children[i], styles, selectorChain)\n    }\n  }\n  traverse(ast, styles, [])\n  return styles\n}\nfunction generate (styles) {\n  return styles.map(style => { // 遍历每一条样式\n    const rules = style.rules.reduce((rules, rule) => { // 将当前样式的所有rules合并起来\n      // eslint-disable-next-line no-return-assign\n      return rules += `\\n${' '.repeat(rule.indent)}${rule.property}:${rule.value};`\n    }, '')\n    return `${' '.repeat(style.indent)}${style.selector} {${rules}}`\n  }).join('\\n')\n}\nexport default cssParse\n","/* @flow */\n\nconst validDivisionCharRE = /[\\w).+\\-_$\\]]/\n\nexport function parseFilters (exp) {\n  let inSingle = false\n  let inDouble = false\n  let inTemplateString = false\n  let inRegex = false\n  let curly = 0\n  let square = 0\n  let paren = 0\n  let lastFilterIndex = 0\n  let c, prev, i, expression, filters\n\n  for (i = 0; i < exp.length; i++) {\n    prev = c\n    c = exp.charCodeAt(i)\n    if (inSingle) {\n      if (c === 0x27 && prev !== 0x5C) inSingle = false\n    } else if (inDouble) {\n      if (c === 0x22 && prev !== 0x5C) inDouble = false\n    } else if (inTemplateString) {\n      if (c === 0x60 && prev !== 0x5C) inTemplateString = false\n    } else if (inRegex) {\n      if (c === 0x2f && prev !== 0x5C) inRegex = false\n    } else if (\n      c === 0x7C && // pipe\n      exp.charCodeAt(i + 1) !== 0x7C &&\n      exp.charCodeAt(i - 1) !== 0x7C &&\n      !curly && !square && !paren\n    ) {\n      if (expression === undefined) {\n        // first filter, end of expression\n        lastFilterIndex = i + 1\n        expression = exp.slice(0, i).trim()\n      } else {\n        pushFilter()\n      }\n    } else {\n      switch (c) {\n      case 0x22: inDouble = true; break         // \"\n      case 0x27: inSingle = true; break         // '\n      case 0x60: inTemplateString = true; break // `\n      case 0x28: paren++; break                 // (\n      case 0x29: paren--; break                 // )\n      case 0x5B: square++; break                // [\n      case 0x5D: square--; break                // ]\n      case 0x7B: curly++; break                 // {\n      case 0x7D: curly--; break                 // }\n      }\n      if (c === 0x2f) { // /\n        let j = i - 1\n        let p\n        // find first non-whitespace prev char\n        for (; j >= 0; j--) {\n          p = exp.charAt(j)\n          if (p !== ' ') break\n        }\n        if (!p || !validDivisionCharRE.test(p)) {\n          inRegex = true\n        }\n      }\n    }\n  }\n\n  if (expression === undefined) {\n    expression = exp.slice(0, i).trim()\n  } else if (lastFilterIndex !== 0) {\n    pushFilter()\n  }\n\n  function pushFilter () {\n    (filters || (filters = [])).push(exp.slice(lastFilterIndex, i).trim())\n    lastFilterIndex = i + 1\n  }\n\n  if (filters) {\n    for (i = 0; i < filters.length; i++) {\n      expression = wrapFilter(expression, filters[i])\n    }\n  }\n\n  return expression\n}\n\nfunction wrapFilter (exp, filter) {\n  const i = filter.indexOf('(')\n  if (i < 0) {\n    // _f: resolveFilter\n    return `_f(\"${filter}\")(${exp})`\n  } else {\n    const name = filter.slice(0, i)\n    const args = filter.slice(i + 1)\n    return `_f(\"${name}\")(${exp}${args !== ')' ? ',' + args : args}`\n  }\n}\n","import {parseFilters} from './filterParser'\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nexport function parseText(text) {\n  const tagRE = defaultTagRE\n  if (!tagRE.test(text)){\n    return\n  }\n  const tokens = []\n  const rawTokens= []\n  let lastIndex = tagRE.lastIndex = 0\n  let match,index,tokenValue\n  // eslint-disable-next-line no-cond-assign\n  while((match = tagRE.exec(text))){\n    index = match.index\n    if (index > lastIndex) {\n      rawTokens.push(tokenValue = text.slice(lastIndex,index))\n      tokens.push(JSON.stringify(tokenValue))\n    }\n    const exp = parseFilters(match[1].trim())\n    tokens.push(`_s(${exp})`)\n    rawTokens.push({'@binding': exp})\n    lastIndex = index+ match[0].length\n  }\n  if (lastIndex < text.length ){\n    rawTokens.push(tokenValue = text.slice(lastIndex))\n    tokens.push(JSON.stringify(tokenValue))\n  }\n  return {\n    expression: tokens.join('+'),\n    tokens: rawTokens\n  }\n}\n","import {parseText} from '../core/textParser'\n\nconst unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`\nconst commentReg = /^<!\\\\--/\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst startTagClose = /^\\s*(\\/?)>/\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst attribute = /^\\s*([^\\s\"'<>\\\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst conditionalComment = /^<!\\[/\nconst reCache = {}\nconst isPlainTextElement = makeMap('script,style,textarea', true)\n\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  const map = Object.create(null)\n  const list = str.split(',')\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true\n  }\n  return expectsLowerCase\n    ? val => map[val.toLowerCase()]\n    : val => map[val]\n}\n\nconst createASTElement = (tag, attrs, parent) => {\n  return {\n    type: 1,\n    tag,\n    attrsList: attrs,\n    rawAttrsMap: {},\n    parent,\n    children: []\n  }\n}\nfunction parse (html, hashCode) {\n  let currentParent\n  let root\n  const stack = []\n  function closeElement (element) {\n    if (!currentParent) return\n    currentParent.children.push(element)\n    element.parent = currentParent\n  }\n  function start (tag, attrs) {\n    const element = createASTElement(tag, attrs, currentParent)\n    if (!root) {\n      element.hashCode = hashCode\n      root = element\n    }\n    if (!element.hashCode) {\n      element.hashCode = root.hashCode\n    }\n    currentParent = element\n\n    stack.push(element)\n  }\n  function chars (text) {\n    const children = currentParent.children\n    if (text) {\n      let res\n      let child\n      // eslint-disable-next-line no-cond-assign\n      if (text !== ' '&& (res = parseText(text))) {\n        console.log(res)\n        child = {\n          type: 2,\n          expression: res.expression,\n          tokens: res.tokens,\n          text\n        }\n      } else if (text !== ' ' || !children.length || children[children.length - 1].text !== ' ') {\n        child = {\n          type: 3,\n          text\n        }\n      }\n      if (child) {\n        children.push(child)\n      }\n    }\n  }\n  function end () {\n    // 子\n    const element = stack[stack.length - 1]\n    stack.length -= 1\n    // 父\n    currentParent = stack[stack.length - 1]\n    closeElement(element)\n  }\n  function comment (text) {\n    if (currentParent) {\n      const child = {\n        type: 3,\n        text,\n        isComment: true\n      }\n      currentParent.children.push(child)\n    }\n  }\n  function parse (html, options) {\n    const stack = []\n    let lastTag\n    let index = 0\n\n    while (html) {\n      if (!lastTag || !isPlainTextElement(lastTag)) {\n        let textEnd = html.indexOf('<')\n        if (textEnd === 0) {\n          if (commentReg.test(html)) {\n            const commentEnd = html.indexOf('-->')\n            if (commentEnd >= 0) {\n              options.comment(html.substring(4, commentEnd), index, index + commentEnd + 3)\n              advance(commentEnd + 3)\n              continue\n            }\n          }\n          const endTagMatch = html.match(endTag)\n          if (endTagMatch) {\n            const curIndex = index\n            advance(endTagMatch[0].length)\n            parseEndTag(endTagMatch[1], curIndex, index)\n            continue\n          }\n\n          const startTagMatch = parseStartTag()\n          if (startTagMatch) {\n            handleStartTag(startTagMatch)\n            continue\n          }\n        }\n        let text, rest, next\n        if (textEnd >= 0) {\n          rest = html.slice(textEnd)\n          while (!endTag.test(rest) &&\n              !startTagOpen.test(rest) &&\n              !comment.test(rest) &&\n              !conditionalComment.test(rest)) {\n            next = rest.indexOf('<', 1)\n            if (next < 0) break\n            textEnd += next\n            rest = html.slice(textEnd)\n          }\n          text = html.substring(0, textEnd)\n        }\n        if (textEnd < 0) {\n          text = html\n        }\n\n        if (text) {\n          advance(text.length)\n        }\n        options.chars(text, index - text.length, index)\n      } else {\n        let endTagLength = 0\n        const stackedTag = lastTag.toLowerCase()\n        const reStackedTag = reCache[stackedTag] || (reCache[stackedTag] = new RegExp('([\\\\s\\\\S]*?)(</' + stackedTag + '[^>]*>)', 'i'))\n        const rest = html.replace(reStackedTag, function (all, text, endTag) {\n          endTagLength = endTag.length\n          options.chars(text)\n          return ''\n        })\n        index += html.length - rest.length\n        html = rest\n        parseEndTag(stackedTag, index - endTagLength, index)\n      }\n    }\n    console.log(stack, html, index, reCache)\n\n    function advance (n) {\n      index += n\n      html = html.substring(n)\n    }\n    function parseEndTag (tagName, start, end) {\n      let pos, lowerCasedTagName\n      if (start == null) start = index\n      if (end == null) end = index\n\n      // Find the closest opened tag of the same type\n      if (tagName) {\n        lowerCasedTagName = tagName.toLowerCase()\n        for (pos = stack.length - 1; pos >= 0; pos--) {\n          if (stack[pos].lowerCasedTag === lowerCasedTagName) {\n            break\n          }\n        }\n      } else {\n        // If no tag name is provided, clean shop\n        pos = 0\n      }\n\n      if (pos >= 0) {\n        for (let i = stack.length - 1; i >= pos; i--) {\n          options.end(stack[i].tag, start, end)\n        }\n        stack.length = pos\n        lastTag = pos && stack[pos - 1].tag\n      }\n    }\n    function parseStartTag () {\n      const start = html.match(startTagOpen)\n      if (start) {\n        const match = {\n          tagName: start[1],\n          attrs: [],\n          start: index\n        }\n        advance(start[0].length)\n        let end, attr\n        // eslint-disable-next-line no-cond-assign\n        while (!(end = html.match(startTagClose)) && (attr = html.match(dynamicArgAttribute) || html.match(attribute))) {\n          attr.start = index\n          advance(attr[0].length)\n          attr.end = index\n          match.attrs.push(attr)\n        }\n        if (end) {\n          match.unarySlash = end[1]\n          advance(end[0].length)\n          match.end = index\n          return match\n        }\n      }\n    }\n    function handleStartTag (match) {\n      const tagName = match.tagName\n      const l = match.attrs.length\n      const attrs = new Array(l)\n      for (let i = 0; i < l; i++) {\n        let args = match.attrs[i]\n        if (args[1] === '@click'){\n          args[1] = 'onmouseup'\n        }\n        const value = args[3] || args[4] || args[5] || ''\n        attrs[i] = {\n          name: args[1],\n          value: value\n        }\n      }\n      console.log(attrs)\n      stack.push({ tag: tagName, lowerCasedTag: tagName.toLowerCase(), attrs: attrs, start: match.start, end: match.end })\n      lastTag = tagName\n      options.start(tagName, attrs, false, match.start, match.end)\n    }\n  }\n\n  parse(html, { start, end, chars, comment })\n  console.log('root', root)\n  return root\n}\n// export default vnode\n// const html = '<div class=\"test\"><span>hello world</span></div>'\n// const root = vnode(html)\n// console.log(root)\n\nexport default parse\n","let uid = 0\nexport default class Dep{\n  static target\n\n  constructor() {\n    this.id = uid++\n    this.subs = []\n  }\n  addSub(sub){\n    this.subs.push(sub)\n  }\n  removeSub(sub){\n    this.subs.$remove(sub)\n  }\n  depend(){\n    Dep.target.addDep(this)\n  }\n\n  notify(){\n    console.log('notify')\n    const subs = this.subs.slice()\n    for (let i = 0,l = subs.length;i<l;i++){\n      subs[i].update()\n    }\n  }\n}\n\nDep.target = null\nconst targetStack = []\n\nexport function pushTarget (target) {\n  targetStack.push(target)\n  Dep.target = target\n  console.log(target,Dep.target)\n\n}\n\nexport function popTarget () {\n  targetStack.pop()\n  Dep.target = targetStack[targetStack.length - 1]\n}\n","import Dep from './dep'\nfunction defineReactive (obj, key, val) {\n  let dep = new Dep()\n  let property = Object.getOwnPropertyDescriptor(obj, key)\n  if (property && property.configurable === false) {\n    return\n  }\n  let getter = property && property.get\n  let setter = property && property.set\n\n  let childOb = observe(val)\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      let value = getter ? getter.call(obj) : val\n      console.log(Dep)\n      if (Dep.target) {\n        dep.depend()\n        if (childOb) {\n          childOb.dep.depend()\n        }\n      }\n      console.log('被取值')\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      let value = getter ? getter.call(obj) : val\n      if (newVal === value) {\n        return\n      }\n      if (setter) {\n        setter.call(obj, newVal)\n      } else {\n        val = newVal\n      }\n      childOb = observe(newVal)\n      console.log(dep)\n      dep.notify()\n    }\n  })\n}\n\nfunction observe (value) {\n  if (!value ) {\n    return\n  }\n\n  let ob = new Observer(value)\n\n  return ob\n}\nclass Observer {\n  constructor(value) {\n    this.value = value\n    this.dep = new Dep()\n    this.walk(value)\n  }\n  walk(obj) {\n    let keys = Object.keys(obj)\n    for (let i = 0, l = keys.length; i < l; i++) {\n      this.convert(keys[i], obj[keys[i]])\n    }\n  }\n  observeArray(items) {\n    // 对数组每个元素进行处理\n    // 主要是处理数组元素中还有数组的情况\n    for (let i = 0, l = items.length; i < l; i++) {\n      observe(items[i])\n    }\n  }\n  convert(key, val) {\n    defineReactive(this.value, key, val)\n  }\n  addVm(vm) {\n    (this.vms || (this.vms = [])).push(vm)\n  }\n  removeVm(vm) {\n    this.vms.$remove(vm)\n  }\n}\n\nexport default observe\n","// 产生一个hash值，只有数字，规则和java的hashcode规则相同\nfunction hashCode (str) {\n  let h = 0\n  const len = str.length\n  const t = 2147483648\n  for (let i = 0; i < len; i++) {\n    h = 31 * h + str.charCodeAt(i)\n    if (h > 2147483647) h %= t // java int溢出则取模\n  }\n  /* var t = -2147483648 * 2;\n   while (h > 2147483647) {\n   h += t\n   }*/\n  return h\n}\n\n// 时间戳来自客户端，精确到毫秒，但仍旧有可能在在多线程下有并发，\n// 尤其hash化后，毫秒数前面的几位都不变化，导致不同日期hash化的值有可能存在相同，\n// 因此使用下面的随机数函数，在时间戳上加随机数，保证hash化的结果差异会比较大\n/*\n ** randomWord 产生任意长度随机字母数字组合\n ** randomFlag-是否任意长度 min-任意长度最小位[固定位数] max-任意长度最大位\n ** 用法  randomWord(false,6);规定位数 flash\n *      randomWord(true,3，6);长度不定，true\n * arr变量可以把其他字符加入，如以后需要小写字母，直接加入即可\n */\nfunction randomWord (randomFlag, min, max) {\n  let str = ''\n  let range = min\n  const arr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n  // 随机产生\n  if (randomFlag) {\n    range = Math.round(Math.random() * (max - min)) + min\n  }\n  for (let i = 0; i < range; i++) {\n    const pos = Math.round(Math.random() * (arr.length - 1))\n    str += arr[pos]\n  }\n  return str\n}\n// 获取hashcode\nfunction getHashCode () {\n  // 定义一个时间戳，计算与1970年相差的毫秒数  用来获得唯一时间\n  const timestamp = (new Date()).valueOf()\n  const myRandom = randomWord(false, 6)\n  const hashcode = hashCode(myRandom + timestamp.toString())\n  return hashcode\n}\n\nexport default getHashCode\n","export const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\nconst bailRE = new RegExp(`[^${unicodeRegExp.source}.$_\\\\d]`)\n\nexport function parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  console.log('parsePath',path)\n  const segments = path.split('.')\n  return function (obj) {\n    for (let i = 0; i < segments.length; i++) {\n      if (!obj) return\n      obj = obj[segments[i]]\n    }\n    return obj\n  }\n}\n\nexport function pluckModuleFunction (\n  modules,\n  key\n){\n  return modules\n    ? modules.map(m => m[key]).filter(_ => _)\n    : []\n}\n","import {popTarget, pushTarget} from './dep'\nimport {parsePath} from '../util/lang'\nclass Watcher {\n  getter\n  constructor(vm, expOrFn,component) {\n    this.vm = vm\n    this.deps = []\n    this.newDeps = []\n    this.depIds = new Set()\n    this.newDepIds = new Set()\n    this.getter = parsePath(expOrFn)\n    this.value = this.get()\n    this.component = component\n  }\n  get(){\n    pushTarget(this)\n    let value\n    const vm = this.vm\n    try{\n      value = this.getter.call(vm,vm)\n    } finally {\n      popTarget()\n      this.cleanupDeps()\n    }\n    return value\n  }\n  setValue(value){\n    this.value = value\n  }\n  cleanupDeps () {\n    let i = this.deps.length\n    while (i--) {\n      const dep = this.deps[i]\n      if (!this.newDepIds.has(dep.id)) {\n        dep.removeSub(this)\n      }\n    }\n    let tmp = this.depIds\n    this.depIds = this.newDepIds\n    this.newDepIds = tmp\n    this.newDepIds.clear()\n    tmp = this.deps\n    this.deps = this.newDeps\n    this.newDeps = tmp\n    this.newDeps.length = 0\n  }\n  addDep(dep){\n    const id = dep.id\n    if (!this.newDepIds.has(id)) {\n      this.newDepIds.add(id)\n      if (!this.depIds.has(id)) {\n        dep.addSub(this)\n        console.log('添加依赖',dep)\n      }\n    }\n  }\n  update(){\n\n    console.log('update')\n    console.log(this.get())\n    this.component.update()\n  }\n}\n\nexport default Watcher\n","import cssParse from './css'\nimport parse from '../parser/parse'\nimport observe from './react'\nimport getHashCode from '../util/hash'\nimport Watcher from './watch'\nexport default class Component {\n  constructor(el,template,jsCode,css) {\n    this.hashCode = getHashCode()\n    this.root = el\n    this.ast = parse(template,this.hashCode)\n    this.cssDom = cssParse(css,this.hashCode)\n    this.dataReact = observe(jsCode.data())\n    this.watcher = {}\n    this.method = jsCode.method ? jsCode.method: {}\n    this.createFn = jsCode.create? jsCode.create : this.emptyFn\n    this.createFn()\n    this.render()\n  }\n  emptyFn = () => {\n\n  }\n  patchCss (cssDom) {\n    const style1 = document.createElement('style')\n    style1.setAttribute('type', 'text/css')\n    style1.innerHTML = cssDom\n    document.head.appendChild(style1)\n  }\n\n  patch (ast) {\n    if (ast.type === 2) {\n      console.log(ast)\n      let text = ast.tokens.reduce((str,t) => {\n        if (typeof t !== 'string'){\n          // console.log(this.watcher.get())\n          let val\n          if (!this.watcher[`value.${t['@binding']}`]){\n            const attrName = 'value.'+ t['@binding']\n            this.watcher[attrName] = new  Watcher(this.dataReact,attrName,this)\n          }\n          console.log(this.watcher)\n          val = this.watcher[`value.${t['@binding']}`].get()\n          str+= val\n        }else {\n          str+=t\n        }\n        return str\n      },'')\n      return { type: 'text', text }\n    }\n    const el = document.createElement(ast.tag)\n    for (const attrs of ast.attrsList) {\n      let value = attrs.value\n      if (attrs.name === 'onmouseup'){\n        el.addEventListener('mouseup',this.method[value].bind(this))\n        continue\n      }\n      el.setAttribute(attrs.name, value)\n    }\n    el.setAttribute(`data-g-${ast.hashCode}`, '')\n    if (ast.children) {\n      for (const child of ast.children) {\n        const childEl = this.patch(child)\n        if (childEl.type === 'node') {\n          el.appendChild(childEl.el)\n        } else {\n          el.textContent = childEl.text\n        }\n      }\n    }\n    return { type: 'node', el }\n  }\n\n  render(){\n    // this.watcher = new Watcher(this.dataReact,'value.name',this)\n    this.patchCss(this.cssDom)\n    this.root.appendChild(this.patch(this.ast).el)\n\n  }\n  update(){\n    this.root.innerHTML = ''\n    this.render()\n  }\n}\n","import Component from './src/core/component'\n// todo recode\nexport class Groove {\n  static instance\n  constructor (root,options) {\n    if (Groove.instance) {\n      return Groove.instance\n    } else {\n      Groove.instance = this\n    }\n    this.root = root\n    this.options = options\n  }\n\n  render () {\n    const component = new Component(this.root,this.options.template,this.options.jsCode,this.options.css)\n    // component.setValue(dataReact.value.name)\n    console.log(component)\n  }\n}\n\nconst appEl = document.getElementById('groove-app')\n\n\nconst css = `\n.page{\n  height:100vh;\n  display:flex;\n  align-items:center;\n  justify-content: center;\n  text-align: center;\n  .text-strong{\n    height:100px;\n    font-size: 60px;\n    text-weight: 1600;\n    background-image: -webkit-linear-gradient(bottom, blue, #fd8403, yellow); \n    -webkit-background-clip: text; \n    -webkit-text-fill-color: transparent;\n  }\n}\n`\nconst grooveOption = {\n  template : '<div class=\"page\"><span class=\"text-strong\" @click=\"helloWorld\">{{text}} world , {{name}}</span></div>',\n  jsCode : {\n    data () {\n      return {\n        name: 'groovejs',\n        text: 'hello'\n      }\n    },\n    create(){\n      console.log('what is this',this)\n    },\n    method:{\n      helloWorld(){\n        console.log(this)\n        this.dataReact.value.text = '啦啦啦德玛西亚'\n        setTimeout(() => {\n          this.dataReact.value.name = 'stellajs'\n        },2000)\n      }\n    }\n  },\n  css\n}\nconst groove = new Groove(appEl,grooveOption)\n\ngroove.render()\n"],"names":["tokenize","cssString","hashCode","lines","trim","split","tokens","reduce","line","spaces","match","indent","length","input","words","firstWord","shift","selectorReg","result","push","type","value","values","replace","console","log","cssParse","ast","children","rules","path","parentNode","token","variableDict","variableValueToken","selectorNode","pop","property","generate","transform","styles","traverse","node","selectorChain","selector","join","rule","i","map","style","repeat","validDivisionCharRE","parseFilters","exp","inSingle","inDouble","inTemplateString","inRegex","curly","square","paren","lastFilterIndex","c","prev","expression","filters","charCodeAt","undefined","slice","pushFilter","j","p","charAt","test","wrapFilter","filter","indexOf","name","args","defaultTagRE","parseText","text","tagRE","rawTokens","lastIndex","index","tokenValue","exec","JSON","stringify","unicodeRegExp","ncname","source","commentReg","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","dynamicArgAttribute","attribute","conditionalComment","reCache","isPlainTextElement","makeMap","str","expectsLowerCase","Object","create","list","val","toLowerCase","createASTElement","tag","attrs","parent","attrsList","rawAttrsMap","parse","html","currentParent","root","stack","closeElement","element","start","chars","res","child","end","comment","isComment","options","lastTag","textEnd","commentEnd","substring","advance","endTagMatch","curIndex","parseEndTag","startTagMatch","parseStartTag","handleStartTag","rest","next","endTagLength","stackedTag","reStackedTag","all","n","tagName","pos","lowerCasedTagName","lowerCasedTag","attr","unarySlash","l","Array","uid","Dep","constructor","id","subs","addSub","sub","removeSub","$remove","depend","target","addDep","notify","update","targetStack","pushTarget","popTarget","defineReactive","obj","key","dep","getOwnPropertyDescriptor","configurable","getter","get","setter","set","childOb","observe","defineProperty","enumerable","reactiveGetter","call","reactiveSetter","newVal","ob","Observer","walk","keys","convert","observeArray","items","addVm","vm","vms","removeVm","h","len","t","randomWord","randomFlag","min","max","range","arr","Math","round","random","getHashCode","timestamp","Date","valueOf","myRandom","hashcode","toString","bailRE","parsePath","segments","Watcher","expOrFn","component","deps","newDeps","depIds","Set","newDepIds","cleanupDeps","setValue","has","tmp","clear","add","Component","el","template","jsCode","css","cssDom","dataReact","data","watcher","method","createFn","emptyFn","render","patchCss","style1","document","createElement","setAttribute","innerHTML","head","appendChild","patch","attrName","addEventListener","bind","childEl","textContent","Groove","instance","appEl","getElementById","grooveOption","helloWorld","setTimeout","groove"],"mappings":"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"}